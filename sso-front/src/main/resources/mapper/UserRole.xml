<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.promotion.product.dao.mysql.UserRoleDao">


    <select id="queryList" resultType="com.promotion.product.dao.dataobject.UserRoleDo">
        SELECT
        id,
        role_code AS 'roleCode',
        role_desc AS 'roleDesc',
        user_mobile AS 'userMobile',
        user_name AS 'userName',
        is_deleted AS 'isDeleted'
        FROM
        tb_user_role
        <where>
            is_deleted = 0
            <if test="userMobile !=null and userMobile!=''">
                AND  user_mobile =#{userMobile}
            </if>

            <if test="userMobile !=null and userMobile!=''">
                AND  user_name =#{userName}
            </if>

        </where>
    </select>


    <select id="queryMobileList" resultType="com.promotion.product.dao.dataobject.UserRoleDo">
        SELECT
        id,
        role_code AS 'roleCode',
        role_desc AS 'roleDesc',
        user_mobile AS 'userMobile',
        user_name AS 'userName',
        is_deleted AS 'isDeleted'
        FROM
        tb_user_role
        <where>
            is_deleted = 0
            <if test="userMobile !=null ">
                AND  user_mobile in
                <foreach collection="userMobile" item="value" open="(" close=")" separator=",">
                    #{value}
                </foreach>
            </if>
        </where>
    </select>


    <select id="queryByIds" resultType="com.promotion.product.dao.dataobject.UserRoleDo">
        SELECT
        id,
        role_code AS 'roleCode',
        role_desc AS 'roleDesc',
        user_mobile AS 'userMobile',
        user_name AS 'userName',
        is_deleted AS 'isDeleted'
        FROM
        tb_user_role
        <where>
            is_deleted = 0
            <if test="id !=null and id!=''">
                AND  id  in
                <foreach collection="ids" item="value" open="(" close=")" separator=",">
                 #{value}
                </foreach>
            </if>
        </where>
    </select>

    <select id="queryById" resultType="com.promotion.product.dao.dataobject.UserRoleDo">
        SELECT
        id,
        role_code AS 'roleCode',
        role_desc AS 'roleDesc',
        user_mobile AS 'userMobile',
        user_name AS 'userName',
        is_deleted AS 'isDeleted'
        FROM
        tb_user_role
        <where>
            is_deleted = 0
            <if test="id !=null and id!=''">
                AND  id  =#{id}
            </if>
        </where>
    </select>

</mapper>